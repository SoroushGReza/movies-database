{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid">
    <!-- Overview background -->
    <div id="movie-overview">
        <div class="overview-bg-overlay"></div>
    </div>
    <div class="container overview-container">
        <div class="row mb-4">
            <div class="col-md-4 movie-details">
                <br>
                <!-- Cover-Image  &  Fallback Cover-Image -->
                <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}" alt="{{ movie.title }} poster"
                    onerror="handleImageError(this);" data-fallback-image="{% static 'media/image404.png' %}"
                    class="img-fluid image-movie">
            </div>
            <div class="col-md-6">
                <h1 id="search-movie-title" class="movie-details"><strong>{{ movie.title }}</strong></h1>
                <p id="search-movie-overview" class="movie-details">{{ movie.overview }}</p>
                <br>
                <h5>
                    <strong class="release-date-color">Release date: </strong><span class="release-vote">{{ movie.release_date }}</span>
                </h5>
                <h5>
                    <strong class="rating-color">Rating: </strong><span class="release-vote">{{ movie.vote_average }}</span><strong class="rating-color"> /10</strong>
                </h5>
                <div class="reviews">
                    {% for review in reviews %}
                    <div class="review">{{ review.text }}</div>
                    {% endfor %}
                </div>
                <form class="review-form transparent-bg" method="POST" action="{% url 'movies:movie_overview' movie_id=movie.id %}">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="reviewText" class="transparent-text user-review-label">Write your review:</label>
                        <textarea class="form-control transparent-input" id="reviewText" rows="2" name="text" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="reviewRating" class="transparent-text user-review-label">Rate the movie (1-10):</label>
                        <input type="number" class="form-control transparent-input" id="reviewRating" name="rating" min="1" max="10" step="0.1" required>
                    </div>
                    <button type="submit" class="btn btn-primary transparent-button">Submit Review</button>
                </form>
            </div>
        </div>
    </div>
</div>
</div>

{% endblock %}