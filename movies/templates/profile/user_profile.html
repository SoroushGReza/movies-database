{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container">
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-success" id="success-message">
                {{ message }}
                <button type="button" class="close" onclick="closeMessage()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        {% endfor %}
    {% endif %}
    <h2>User Profile</h2>
    <p><strong>Name: </strong>{{ user.username }}</p>
    <p><strong>E-mail: </strong>{{ user.email }}</p>
    <a href="#" class="btn btn-primary" id="edit-profile-button">Edit Profile</a>
    <div id="edit-profile-form" style="display: none;">
        <form method="post" {% if form.errors or password_form.errors %}{% endif %}>
            {% csrf_token %}
            {{ form.as_p }}
            {% if form.errors %}
            {% endif %}
            <h3>Change Password</h3>
            <div class="errorlist">
                {{ password_form.as_p }}
            </div>
            <button type="submit">Update Profile</button>
        </form>
    </div>
</div>
<script>
    // Hide messages after 5 seconds
    setTimeout(function() {
        document.getElementById('success-message').style.display = 'none';
    }, 5000);
</script>
{% endblock %}